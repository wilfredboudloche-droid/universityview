<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Network Communications Interactive Activity - University View Academy</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f9f9f9;
    margin: 0;
    padding: 0;
    color: #004d40; /* dark green from logo */
  }
  header {
    background-color: #00539f; /* blue from logo */
    color: white;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
  }
  header img {
    height: 60px;
  }
  header h1 {
    font-size: 1.8rem;
    margin: 0;
  }
  .top-section {
    display: flex;
    gap: 20px;
    max-width: 825px;
    margin: 15px auto;
    padding: 0 10px;
  }
  .standards-blurb {
    flex: 2;
    padding: 15px 20px;
    background-color: #e0f2f1;
    border-radius: 8px;
    color: #004d40;
    font-size: 0.95rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }
  .video-window {
    flex: 1;
    background-color: #000;
    border-radius: 8px;
    aspect-ratio: 16 / 9;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.8rem;
    text-align: center;
    border: 3px solid #00539f;
    overflow: hidden;
    position: relative;
  }
  .timer-container {
    margin-top: 10px;
    text-align: center;
    max-width: 825px;
    margin-left: auto;
    margin-right: auto;
    padding-right: 10px;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
  }
  #timer-display {
    font-size: 1.2rem;
    font-weight: bold;
    color: #00539f;
    background: #fff;
    padding: 5px 15px;
    border-radius: 20px;
    border: 2px solid #00539f;
    min-width: 80px;
    text-align: center;
  }
  .timer-blurb {
    font-size: 0.7rem;
    color: #666;
    margin-top: 2px;
  }
  .protocols.hidden {
    display: none;
  }
  .definitions-column {
    width: 42% !important;
    background-color: #f0f4f8;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: none;
    flex-shrink: 0;
  }
  .definitions-column.visible {
    display: block;
  }
  .definition-item {
    background-color: white;
    margin: 8px 0;
    padding: 10px;
    border-radius: 6px;
    font-size: 0.85rem;
    border-left: 4px solid #00539f;
    min-height: 45px;
    display: flex;
    align-items: center;
  }
  #try-again-btn {
    display: none;
    margin: 20px auto;
    padding: 10px 25px;
    background-color: #00539f;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1rem;
    transition: background 0.3s;
  }
  #try-again-btn:hover {
    background-color: #003d7a;
  }
  .video-window iframe, .video-window video {
    width: 100%;
    height: 100%;
    border: none;
  }
  .video-placeholder-text {
    padding: 10px;
  }
  main {
    max-width: 825px;
    margin: 20px auto;
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    padding: 20px;
  }
  h2 {
    color: #00796b; /* medium green */
    margin-top: 0;
  }
  .matching-container {
    display: flex !important;
    flex-direction: row !important;
    justify-content: space-between;
    position: relative;
    margin-top: 20px;
    width: 100%;
  }
  .protocols, .ports {
    width: 42% !important;
    background-color: #e0f2f1;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    min-height: 400px;
    flex-shrink: 0;
  }
  .protocols h3, .ports h3 {
    text-align: center;
    color: #004d40;
    margin-top: 0;
  }
  .protocol-list, .port-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .protocol-item, .port-item {
    background-color: white;
    margin: 8px 0;
    padding: 10px 15px;
    border-radius: 6px;
    cursor: grab;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    gap: 10px;
    user-select: none;
    font-size: 0.95rem;
    position: relative;
  }
  .protocol-item.dragging {
    opacity: 0.5;
  }
  .port-item {
    border: 2px dashed #00796b;
    min-height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: #004d40;
    cursor: default;
  }
  .port-item.correct {
    border-color: #2e7d32;
    background-color: #c8e6c9;
    border-style: solid;
  }
  .port-item.incorrect {
    border-color: #c62828;
    background-color: #ffcdd2;
  }
  .feedback {
    margin-top: 15px;
    font-weight: 700;
    text-align: center;
    min-height: 1.2em;
  }
  svg.connection-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: visible;
  }
  footer {
    margin-top: 40px;
    text-align: center;
    font-size: 0.9rem;
    color: #004d40;
    padding-bottom: 20px;
  }
  @media (max-width: 900px) {
    .matching-container {
      flex-direction: column;
      height: auto;
    }
    .protocols, .ports {
      width: 100%;
      min-height: auto;
      margin-bottom: 20px;
    }
    svg.connection-svg {
      display: none;
    }
  }
</style>
</head>
<body>
<header>
  <img src="logo.png" alt="University View Academy Logo" />
  <h1>Network Communications Interactive Activity</h1>
</header>

<div class="top-section">
  <div class="standards-blurb">
    <h3 style="margin-top: 0;">Exam Objectives:</h3>
    <p><strong>2.1 – Compare and contrast TCP and UDP ports, protocols, and their purposes</strong></p>
    <p style="font-size: 0.85rem; line-height: 1.4;">Covers TCP/UDP differences, common ports (20, 21, 22, 23, 25, 53, 67, 68, 80, 110, 137-139, 143, 389, 443, 445, 3389), and protocols like FTP, SSH, SMTP, DNS, HTTP, HTTPS, and RDP.</p>
  </div>

  <div class="video-window">
    <!-- Replace the div below with your embed code (e.g., <iframe src="..."></iframe>) -->
    <div class="video-placeholder-text">
      <svg viewBox="0 0 24 24" style="width: 40px; height: 40px; fill: white; margin-bottom: 5px;"><path d="M8 5v14l11-7z"/></svg><br>
      Teacher Video Placeholder<br>
      <span style="font-size: 0.7rem;">(Embed your video here)</span>
    </div>
  </div>
</div>

<div class="timer-container">
  <div id="timer-display">00:00</div>
  <div class="timer-blurb">Time elapsed since first correct match.</div>
</div>

<main>
  <section>
    <h2>Port Identification Challenge</h2>
    <p>Drag the protocol to its correct port number. Master these for the A+ exam!</p>
    <div class="matching-container" id="matching-container">
      <div class="protocols">
        <h3>Protocols</h3>
        <ul class="protocol-list" id="protocol-list"></ul>
      </div>
      <div class="definitions-column" id="definitions-column">
        <h3>Definitions</h3>
        <ul class="protocol-list" id="definition-list"></ul>
      </div>
      <div class="ports">
        <h3>Port Numbers</h3>
        <ul class="port-list" id="port-list"></ul>
      </div>
      <svg class="connection-svg" id="connection-svg"></svg>
    </div>
    <div class="feedback" id="feedback"></div>
    <button id="try-again-btn">Try Again</button>
  </section>
</main>

<footer>
  © 2026 University View Academy - Virtue, Vigor, Vision
</footer>

<script>
  const protocols = [
    { name: 'FTP', port: '20/21', type: 'TCP', def: 'Used for transferring files between a client and a server.' },
    { name: 'SSH', port: '22', type: 'TCP', def: 'Provides a secure, encrypted channel for remote login.' },
    { name: 'Telnet', port: '23', type: 'TCP', def: 'An older, unencrypted protocol for remote terminal access.' },
    { name: 'SMTP', port: '25', type: 'TCP', def: 'The standard protocol for sending emails across networks.' },
    { name: 'DNS', port: '53', type: 'TCP/UDP', def: 'Translates human-readable domain names into IP addresses.' },
    { name: 'DHCP', port: '67/68', type: 'UDP', def: 'Automatically assigns IP addresses to devices on a network.' },
    { name: 'HTTP', port: '80', type: 'TCP', def: 'The foundation of data communication for the World Wide Web.' },
    { name: 'HTTPS', port: '443', type: 'TCP', def: 'Secure version of HTTP, encrypted using SSL/TLS.' },
    { name: 'RDP', port: '3389', type: 'TCP', def: 'Allows users to connect to and control a remote computer.' }
  ];

  function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
  }

  const protocolList = document.getElementById('protocol-list');
  const definitionList = document.getElementById('definition-list');
  const portList = document.getElementById('port-list');
  const feedback = document.getElementById('feedback');
  const connectionSvg = document.getElementById('connection-svg');
  const matchingContainer = document.getElementById('matching-container');
  const definitionsColumn = document.getElementById('definitions-column');
  const tryAgainBtn = document.getElementById('try-again-btn');
  const timerDisplay = document.getElementById('timer-display');

  const protocolContainer = document.querySelector('.protocols');

  let matches = [];
  let timerInterval = null;
  let startTime = null;
  let timerStarted = false;

  function startTimer() {
    if (timerStarted) return;
    timerStarted = true;
    startTime = Date.now();
    timerInterval = setInterval(updateTimer, 1000);
  }

  function updateTimer() {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
    const seconds = (elapsed % 60).toString().padStart(2, '0');
    timerDisplay.textContent = `${minutes}:${seconds}`;
  }

  function stopTimer() {
    clearInterval(timerInterval);
  }

  function resetTimer() {
    stopTimer();
    timerStarted = false;
    timerDisplay.textContent = '00:00';
  }

  function createListItems() {
    protocolList.innerHTML = '';
    portList.innerHTML = '';
    definitionList.innerHTML = '';
    matches = [];
    connectionSvg.innerHTML = '';
    protocolContainer.classList.remove('hidden');
    addArrowMarker();
    
    const shuffledProtocols = shuffle([...protocols]);
    const shuffledPorts = shuffle([...protocols]);

    shuffledProtocols.forEach((p, i) => {
      const li = document.createElement('li');
      li.className = 'protocol-item';
      li.draggable = true;
      li.textContent = `${p.name} (${p.type})`;
      li.dataset.port = p.port;
      li.id = `protocol-${i}`;
      li.addEventListener('dragstart', dragStart);
      li.addEventListener('dragend', dragEnd);
      protocolList.appendChild(li);

      // Create hidden definition item
      const defLi = document.createElement('li');
      defLi.className = 'definition-item';
      defLi.textContent = p.def;
      defLi.dataset.port = p.port;
      definitionList.appendChild(defLi);
    });

    shuffledPorts.forEach((p, i) => {
      const li = document.createElement('li');
      li.className = 'port-item';
      li.textContent = p.port;
      li.dataset.port = p.port;
      li.id = `port-${i}`;
      li.addEventListener('dragover', dragOver);
      li.addEventListener('drop', drop);
      portList.appendChild(li);
    });
  }

  let draggedItem = null;

  function dragStart(e) {
    draggedItem = e.target;
    setTimeout(() => e.target.classList.add('dragging'), 0);
  }

  function dragEnd(e) {
    e.target.classList.remove('dragging');
  }

  function dragOver(e) {
    e.preventDefault();
  }

  function drop(e) {
    e.preventDefault();
    if (!draggedItem) return;

    const port = e.target.dataset.port;
    const protocolPort = draggedItem.dataset.port;

    if (port === protocolPort) {
      startTimer();
      e.target.classList.add('correct');
      e.target.textContent = `${e.target.dataset.port} - ${draggedItem.textContent} ✓`;
      draggedItem.style.visibility = 'hidden';
      feedback.textContent = 'Great job!';
      feedback.style.color = '#2e7d32';
      matches.push({ protocolId: draggedItem.id, portId: e.target.id });
      drawConnections();

      if (matches.length === protocols.length) {
        stopTimer();
        const finalTime = timerDisplay.textContent;
        feedback.innerHTML = `Challenge Complete! Your time: <strong>${finalTime}</strong>. Can you do better?`;
        protocolContainer.classList.add('hidden');
        connectionSvg.innerHTML = ''; // Clear wires
        definitionsColumn.classList.add('visible');
        tryAgainBtn.style.display = 'block';
      }
    } else {
      e.target.classList.add('incorrect');
      feedback.textContent = 'Try again!';
      feedback.style.color = '#c62828';
      setTimeout(() => e.target.classList.remove('incorrect'), 1000);
    }
  }

  tryAgainBtn.addEventListener('click', () => {
    definitionsColumn.classList.remove('visible');
    protocolContainer.classList.remove('hidden');
    tryAgainBtn.style.display = 'none';
    feedback.textContent = '';
    resetTimer();
    createListItems();
  });

  function drawConnections() {
    connectionSvg.innerHTML = '';
    matches.forEach(match => {
      const protocolElem = document.getElementById(match.protocolId);
      const portElem = document.getElementById(match.portId);
      if (!protocolElem || !portElem) return;

      const protocolRect = protocolElem.getBoundingClientRect();
      const portRect = portElem.getBoundingClientRect();
      const containerRect = matchingContainer.getBoundingClientRect();

      // Calculate start and end points relative to SVG container
      const startX = protocolRect.right - containerRect.left;
      const startY = protocolRect.top + protocolRect.height / 2 - containerRect.top;
      const endX = portRect.left - containerRect.left;
      const endY = portRect.top + portRect.height / 2 - containerRect.top;

      // Create a smooth cubic Bezier curve path
      const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      const deltaX = (endX - startX) / 2;
      const d = `M${startX},${startY} C${startX + deltaX},${startY} ${endX - deltaX},${endY} ${endX},${endY}`;
      path.setAttribute('d', d);
      path.setAttribute('stroke', '#2e7d32');
      path.setAttribute('stroke-width', '3');
      path.setAttribute('fill', 'none');
      path.setAttribute('marker-end', 'url(#arrow)');

      connectionSvg.appendChild(path);
    });
  }

  // Add arrow marker definition
  function addArrowMarker() {
    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
    const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
    marker.setAttribute('id', 'arrow');
    marker.setAttribute('markerWidth', '10');
    marker.setAttribute('markerHeight', '10');
    marker.setAttribute('refX', '10');
    marker.setAttribute('refY', '3');
    marker.setAttribute('orient', 'auto');
    marker.setAttribute('markerUnits', 'strokeWidth');

    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', 'M0,0 L0,6 L9,3 z');
    path.setAttribute('fill', '#2e7d32');

    marker.appendChild(path);
    defs.appendChild(marker);
    connectionSvg.appendChild(defs);
  }

  window.addEventListener('resize', drawConnections);

  addArrowMarker();
  createListItems();
</script>
</body>
</html>
