<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Network Path Simulation Game - University View Academy</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f0f6f4;
    margin: 0;
    padding: 0;
    color: #004d40;
  }
  header {
    background-color: #0b3d91; /* School blue */
    color: white;
    padding: 1rem 2rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  header img {
    height: 50px;
  }
  h1 {
    font-weight: 700;
    font-size: 1.8rem;
    margin: 0;
  }
  main {
    padding: 1rem 2rem;
    max-width: 900px;
    margin: auto;
  }
  .scenario-selector {
    margin-bottom: 1rem;
  }
  .scenario-selector label {
    font-weight: 600;
    margin-right: 1rem;
  }
  svg {
    width: 100%;
    height: 500px;
    border: 2px solid #0b3d91;
    border-radius: 8px;
    background-color: white;
  }
  .component {
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  .component:hover {
    transform: scale(1.1);
  }
  .selected {
    stroke: #00796b;
    stroke-width: 4px;
  }
  .path-line {
    stroke: #00796b;
    stroke-width: 4px;
    fill: none;
  }
  button {
    background-color: #00796b;
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 1rem;
  }
  button:hover {
    background-color: #004d40;
  }
  .feedback {
    margin-top: 1rem;
    font-weight: 600;
  }
</style>
</head>
<body>
<header>
  <img src="logo.png" alt="University View Academy Logo" />
  <h1>Network Path Simulation Game</h1>
</header>
<main>
  <div class="scenario-selector">
    <label for="scenario">Choose a scenario:</label>
    <select id="scenario">
      <option value="1">Scenario 1: Home Network to Internet</option>
      <option value="2">Scenario 2: Small Office Network</option>
      <option value="3">Scenario 3: Remote Satellite Connection</option>
    </select>
  </div>
  <svg id="network-svg" viewBox="0 0 900 500" aria-label="Network Path Simulation">
    <!-- Components will be dynamically added here -->
  </svg>
  <button id="check-path">Check Path</button>
  <div class="feedback" id="feedback"></div>
</main>
<script>
  const svg = document.getElementById('network-svg');
  const scenarioSelect = document.getElementById('scenario');
  const checkBtn = document.getElementById('check-path');
  const feedback = document.getElementById('feedback');

  // Network components data for each scenario
  const scenarios = {
    1: {
      description: 'Home Network to Internet',
      components: [
        { id: 'device', label: 'Device', x: 100, y: 400 },
        { id: 'switch', label: 'Switch', x: 250, y: 350 },
        { id: 'router', label: 'SOHO Router', x: 400, y: 300 },
        { id: 'modem', label: 'Modem', x: 600, y: 300 },
        { id: 'isp', label: 'ISP PoP', x: 750, y: 200 },
        { id: 'internet', label: 'Internet', x: 850, y: 100 },
      ],
      correctPath: ['device', 'switch', 'router', 'modem', 'isp', 'internet'],
    },
    2: {
      description: 'Small Office Network',
      components: [
        { id: 'workstation', label: 'Workstation', x: 100, y: 400 },
        { id: 'server', label: 'Server', x: 100, y: 300 },
        { id: 'switch', label: 'Switch', x: 300, y: 350 },
        { id: 'router', label: 'Router', x: 500, y: 300 },
        { id: 'firewall', label: 'Firewall', x: 650, y: 300 },
        { id: 'isp', label: 'ISP PoP', x: 750, y: 200 },
        { id: 'internet', label: 'Internet', x: 850, y: 100 },
      ],
      correctPath: ['workstation', 'switch', 'router', 'firewall', 'isp', 'internet'],
    },
    3: {
      description: 'Remote Satellite Connection',
      components: [
        { id: 'device', label: 'Device', x: 100, y: 400 },
        { id: 'router', label: 'Router', x: 300, y: 350 },
        { id: 'modem', label: 'Satellite Modem', x: 500, y: 300 },
        { id: 'satellite', label: 'Satellite', x: 700, y: 150 },
        { id: 'isp', label: 'ISP PoP', x: 750, y: 200 },
        { id: 'internet', label: 'Internet', x: 850, y: 100 },
      ],
      correctPath: ['device', 'router', 'modem', 'satellite', 'isp', 'internet'],
    },
  };

  let selectedComponents = [];

  // Clear SVG
  function clearSVG() {
    while (svg.firstChild) {
      svg.removeChild(svg.firstChild);
    }
  }

  // Draw components
  function drawComponents(scenarioId) {
    clearSVG();
    selectedComponents = [];
    feedback.textContent = '';

    const scenario = scenarios[scenarioId];

    const icons = {
      device: `<rect x="8" y="12" width="48" height="30" rx="4" fill="#ffffff" stroke="#004d40" stroke-width="2"/>
        <rect x="4" y="44" width="56" height="6" rx="2" fill="#004d40"/>`,
      switch: `<rect x="12" y="28" width="40" height="18" rx="4" fill="#ffffff" stroke="#004d40" stroke-width="2"/>
        <circle cx="20" cy="37" r="3" fill="#4CBB17"/>
        <circle cx="32" cy="37" r="3" fill="#4CBB17"/>
        <circle cx="44" cy="37" r="3" fill="#4CBB17"/>`,
      router: `<rect x="14" y="28" width="36" height="18" rx="4" fill="#ffffff" stroke="#004d40" stroke-width="2"/>
        <circle cx="32" cy="37" r="3" fill="#004d40"/>
        <path d="M20 24c6-6 18-6 24 0" fill="none" stroke="#004d40" stroke-width="2" stroke-linecap="round"/>
        <path d="M24 20c4-4 12-4 16 0" fill="none" stroke="#004d40" stroke-width="2" stroke-linecap="round"/>`,
      modem: `<rect x="12" y="16" width="40" height="28" rx="4" fill="#ffffff" stroke="#004d40" stroke-width="2"/>
        <rect x="20" y="22" width="6" height="6" fill="#4CBB17"/>
        <rect x="30" y="22" width="6" height="6" fill="#4CBB17"/>
        <rect x="40" y="22" width="6" height="6" fill="#4CBB17"/>`,
      firewall: `<path d="M32 8 L48 14 L48 28 C48 40 36 50 32 52 C28 50 16 40 16 28 L16 14 Z" fill="#ffffff" stroke="#d32f2f" stroke-width="2"/>
        <rect x="28" y="26" width="8" height="12" fill="#d32f2f"/>`,
      satellite: `<path d="M44 20 L54 10 L58 14 L48 24 Z" fill="#ffffff" stroke="#004d40" stroke-width="2"/>
        <circle cx="20" cy="44" r="8" fill="#4CBB17" stroke="#004d40" stroke-width="2"/>
        <path d="M28 36 L46 18" stroke="#004d40" stroke-width="2" stroke-linecap="round"/>`,
      isp: `<path d="M20 40h28a8 8 0 0 0 0-16 12 12 0 0 0-22-2 8 8 0 0 0-6 18z" fill="#ffffff" stroke="#004d40" stroke-width="2"/>
        <rect x="22" y="36" width="12" height="10" fill="#e0e0e0" stroke="#004d40"/>`,
      internet: `<circle cx="32" cy="32" r="18" fill="#ffffff" stroke="#004d40" stroke-width="2"/>
        <path d="M14 32h36" stroke="#004d40" stroke-width="1.5"/>
        <path d="M32 14v36" stroke="#004d40" stroke-width="1.5"/>
        <path d="M22 20c6 6 6 18 0 24" stroke="#004d40" stroke-width="1.2"/>
        <path d="M42 44c-6-6-6-18 0-24" stroke="#004d40" stroke-width="1.2"/>`,
      server: `<rect x="10" y="12" width="44" height="12" rx="2" fill="#ffffff" stroke="#004d40" stroke-width="2" />
        <rect x="10" y="28" width="44" height="12" rx="2" fill="#ffffff" stroke="#004d40" stroke-width="2" />
        <rect x="10" y="44" width="44" height="6" rx="2" fill="#ffffff" stroke="#004d40" stroke-width="2" />`
    };

    scenario.components.forEach((comp) => {
      const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
      g.setAttribute('class', 'component');
      g.setAttribute('id', comp.id);
      g.setAttribute('tabindex', 0);
      g.setAttribute('aria-label', comp.label);
      g.setAttribute('role', 'button');
      g.setAttribute('transform', `translate(${comp.x - 32}, ${comp.y - 32})`);
      g.innerHTML = icons[comp.id] || icons['device'];

      // Draw label
      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      text.setAttribute('x', comp.x);
      text.setAttribute('y', comp.y + 50);
      text.setAttribute('text-anchor', 'middle');
      text.setAttribute('font-size', '14');
      text.setAttribute('fill', '#004d40');
      text.textContent = comp.label;

      svg.appendChild(g);
      svg.appendChild(text);

      // Add click event
      g.addEventListener('click', () => {
        toggleSelect(comp.id);
      });
      g.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleSelect(comp.id);
        }
      });
    });
  }

  // Toggle selection
  function toggleSelect(id) {
    const index = selectedComponents.indexOf(id);
    if (index === -1) {
      // Add if next in sequence or first
      if (selectedComponents.length === 0 || isNextValid(id)) {
        selectedComponents.push(id);
      } else {
        feedback.textContent = 'Please select the next correct component in the path.';
        return;
      }
    } else {
      // Remove if last selected
      if (index === selectedComponents.length - 1) {
        selectedComponents.pop();
      } else {
        feedback.textContent = 'You can only deselect the last selected component.';
        return;
      }
    }
    feedback.textContent = '';
    updateSelection();
  }

  // Check if the selected component is the next correct one
  function isNextValid(id) {
    const scenario = scenarios[scenarioSelect.value];
    const nextIndex = selectedComponents.length;
    return scenario.correctPath[nextIndex] === id;
  }

  // Update selection visuals and draw path lines
  function updateSelection() {
    // Clear all selections
    scenarios[scenarioSelect.value].components.forEach((comp) => {
      const elem = document.getElementById(comp.id);
      elem.classList.remove('selected');
    });

    // Highlight selected
    selectedComponents.forEach((id) => {
      const elem = document.getElementById(id);
      elem.classList.add('selected');
    });

    // Remove existing path lines
    const existingLines = svg.querySelectorAll('.path-line');
    existingLines.forEach((line) => line.remove());

    // Draw lines between selected components
    for (let i = 0; i < selectedComponents.length - 1; i++) {
      const fromId = selectedComponents[i];
      const toId = selectedComponents[i + 1];
      const fromComp = scenarios[scenarioSelect.value].components.find(c => c.id === fromId);
      const toComp = scenarios[scenarioSelect.value].components.find(c => c.id === toId);
      
      const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      line.setAttribute('x1', fromComp.x);
      line.setAttribute('y1', fromComp.y);
      line.setAttribute('x2', toComp.x);
      line.setAttribute('y2', toComp.y);
      line.setAttribute('class', 'path-line');
      svg.appendChild(line);
    }
  }

  // Check path correctness
  function checkPath() {
    const scenario = scenarios[scenarioSelect.value];
    if (selectedComponents.length !== scenario.correctPath.length) {
      feedback.textContent = 'Incomplete path. Please complete the path.';
      return;
    }
    for (let i = 0; i < scenario.correctPath.length; i++) {
      if (selectedComponents[i] !== scenario.correctPath[i]) {
        feedback.textContent = 'Incorrect path. Try again.';
        return;
      }
    }
    feedback.textContent = 'Correct! You have successfully created the network path.';
  }

  // Initialize
  scenarioSelect.addEventListener('change', () => {
    drawComponents(scenarioSelect.value);
  });

  checkBtn.addEventListener('click', checkPath);

  // Draw initial scenario
  drawComponents(scenarioSelect.value);
</script>
</body>
</html>
